import { database, ref, push, set } from '../js/firebase-config.js';

const form = document.getElementById('newPageForm');

form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const imageUrl = document.getElementById('imageUrl').value;
    const text = document.getElementById('text').value;
    const tags = document.getElementById('tags').value.split(',').map(t => t.trim());
    const order = parseInt(document.getElementById('order').value);

    const pageData = {
        imageUrl,
        text,
        tags,
        order,
        createdAt: Date.now()
    };

    try {
        const newPageRef = push(ref(database, 'pages'));
        await set(newPageRef, pageData);
        alert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß üéâ');
        form.reset();
    } catch (err) {
        console.error(err);
        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å');
    }
});
