<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tonfern Journal - Admin Panel</title>
    <link rel="stylesheet" href="admin.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="admin-container">
        <!-- Header -->
        <header class="admin-header">
            <div class="header-content">
                <h1><i class="fas fa-book-open"></i> Tonfern Journal Admin</h1>
                <div class="user-info" id="userInfo">
                    <span id="userEmail">กำลังตรวจสอบ...</span>
                    <button class="logout-btn" id="logoutBtn">
                        <i class="fas fa-sign-out-alt"></i> ออกจากระบบ
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Auth Section (shown when not logged in) -->
            <div class="auth-section" id="authSection">
                <div class="auth-card">
                    <h2>เข้าสู่ระบบเพื่อจัดการเนื้อหา</h2>
                    <p>เฉพาะเฟิร์นเท่านั้นที่สามารถเข้าถึงได้</p>
                    
                    <form class="login-form" id="loginForm">
                        <div class="form-group">
                            <label for="email">อีเมล:</label>
                            <input type="email" id="email" required placeholder="fern@example.com">
                        </div>
                        
                        <div class="form-group">
                            <label for="password">รหัสผ่าน:</label>
                            <input type="password" id="password" required placeholder="รหัสผ่าน">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt"></i> เข้าสู่ระบบ
                        </button>
                    </form>
                    
                    <div class="auth-divider">
                        <span>หรือ</span>
                    </div>
                    
                    <button class="btn btn-google" id="googleSignIn">
                        <i class="fab fa-google"></i> เข้าสู่ระบบด้วย Google
                    </button>
                </div>
            </div>

            <!-- Admin Panel (shown when logged in as Fern) -->
            <div class="admin-panel" id="adminPanel" style="display: none;">
                <!-- Quick Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <i class="fas fa-file-alt"></i>
                        <div class="stat-info">
                            <h3 id="totalPages">0</h3>
                            <p>หน้าทั้งหมด</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <i class="fas fa-images"></i>
                        <div class="stat-info">
                            <h3 id="totalImages">0</h3>
                            <p>รูปภาพ</p>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <i class="fas fa-video"></i>
                        <div class="stat-info">
                            <h3 id="totalVideos">0</h3>
                            <p>วิดีโอ</p>
                        </div>
                    </div>
                </div>

                <!-- Add New Page -->
                <div class="admin-card">
                    <h2><i class="fas fa-plus-circle"></i> เพิ่มหน้าใหม่</h2>
                    
                    <form class="add-page-form" id="addPageForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="pageTitle">หัวข้อหน้า:</label>
                                <input type="text" id="pageTitle" required placeholder="ใส่หัวข้อหน้า">
                            </div>
                            
                            <div class="form-group">
                                <label for="pageType">ประเภทหน้า:</label>
                                <select id="pageType" required>
                                    <option value="text">ข้อความ</option>
                                    <option value="image">รูปภาพ</option>
                                    <option value="video">วิดีโอ</option>
                                    <option value="cover">หน้าปก</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group" id="contentGroup">
                            <label for="pageContent">เนื้อหา:</label>
                            <textarea id="pageContent" placeholder="ใส่เนื้อหาของหน้า" rows="4"></textarea>
                        </div>

                        <div class="form-group" id="fileGroup" style="display: none;">
                            <label for="pageFile">ไฟล์:</label>
                            <input type="file" id="pageFile" accept="image/*,video/*">
                            <div class="file-info">
                                <small>รองรับ: JPG, PNG, GIF, MP4, MOV (ขนาดไม่เกิน 15MB)</small>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="pageNote">บันทึก (ไม่บังคับ):</label>
                            <input type="text" id="pageNote" placeholder="บันทึกสั้นๆ เกี่ยวกับหน้านี้">
                        </div>

                        <div class="form-group">
                            <label for="pageOrder">ลำดับหน้า:</label>
                            <input type="number" id="pageOrder" min="1" placeholder="ลำดับที่ต้องการ">
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> บันทึกหน้า
                            </button>
                            <button type="button" class="btn btn-secondary" id="clearForm">
                                <i class="fas fa-eraser"></i> ล้างฟอร์ม
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Manage Pages -->
                <div class="admin-card">
                    <h2><i class="fas fa-list"></i> จัดการหน้าทั้งหมด</h2>
                    
                    <div class="pages-controls">
                        <button class="btn btn-secondary" id="refreshPages">
                            <i class="fas fa-sync-alt"></i> รีเฟรช
                        </button>
                        <button class="btn btn-danger" id="deleteSelected" style="display: none;">
                            <i class="fas fa-trash"></i> ลบที่เลือก
                        </button>
                    </div>

                    <div class="pages-list" id="pagesList">
                        <div class="loading">
                            <i class="fas fa-spinner fa-spin"></i> กำลังโหลด...
                        </div>
                    </div>
                </div>

                <!-- Settings -->
                <div class="admin-card">
                    <h2><i class="fas fa-cog"></i> การตั้งค่า</h2>
                    
                    <form class="settings-form" id="settingsForm">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="twoPageSpread" checked>
                                แสดงผลแบบหน้าคู่
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="pageFlipSound" checked>
                                เสียงพลิกหน้า
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="enableNotes">
                                เปิดใช้งานระบบบันทึก
                            </label>
                        </div>
                        
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> บันทึกการตั้งค่า
                        </button>
                    </form>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="admin-footer">
            <p>&copy; 2024 Tonfern Journal - Admin Panel</p>
            <a href="../" class="view-site-link">
                <i class="fas fa-external-link-alt"></i> ดูเว็บไซต์
            </a>
        </footer>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>
    
    <!-- Admin Scripts -->
    <script src="../js/firebase-config.js"></script>
    <script src="admin.js"></script>
</body>
</html>
